---
version: "3"
services:
  web:
    build:
      context: web
    links:
      - api:api
      - db:db
    ports:
      - 5555:9999
    volumes:
      - ./web:/app
  api:
    build:
      context: api
    links:
      - controller:controller
      - db:db
    volumes:
     - ./api:/app
  db:
    image: mongo
    volumes:
      - ./db:/data/db
  controller:
    build:
      context: controller
    links:
      - db:db
      - broker:broker
    volumes:
     - ./controller:/app
    
  broker:
    build: broker
    ports:
      - 1882:1883
      - 8882:8883
  
